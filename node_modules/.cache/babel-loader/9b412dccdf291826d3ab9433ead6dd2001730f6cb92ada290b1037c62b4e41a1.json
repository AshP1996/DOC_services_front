{"ast":null,"code":"import axios from \"axios\";\nconst API_BASE_URL = \"http://localhost:8000/api/accounts\";\nconst handleError = error => {\n  var _error$response, _error$response$data;\n  const errorMessage = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.detail) || \"An error occurred\";\n  console.error(\"API Error:\", errorMessage); // Log for debugging\n  throw new Error(errorMessage);\n};\nexport const signup = async data => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/signup/`, data);\n    return saveUserData(response.data);\n  } catch (error) {\n    handleError(error);\n  }\n};\nexport const login = async data => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/login/`, data);\n    return saveUserData(response.data);\n  } catch (error) {\n    handleError(error);\n  }\n};\nconst saveUserData = data => {\n  const {\n    access,\n    refresh,\n    user\n  } = data;\n\n  // Save tokens and user data to localStorage or a secure store\n  localStorage.setItem(\"accessToken\", access);\n  localStorage.setItem(\"refreshToken\", refresh);\n  localStorage.setItem(\"userId\", user.id);\n  localStorage.setItem(\"userType\", user.user_type);\n\n  // Set the Authorization header for future API calls\n  setAuthToken(access);\n  return data;\n};\n\n// Helper to set Authorization header for future API calls\nexport const setAuthToken = token => {\n  if (token) {\n    axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n  } else {\n    delete axios.defaults.headers.common[\"Authorization\"];\n  }\n};","map":{"version":3,"names":["axios","API_BASE_URL","handleError","error","_error$response","_error$response$data","errorMessage","response","data","detail","console","Error","signup","post","saveUserData","login","access","refresh","user","localStorage","setItem","id","user_type","setAuthToken","token","defaults","headers","common"],"sources":["/home/developer/Documents/temp/react/my-app/src/accounts/services/api.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_BASE_URL = \"http://localhost:8000/api/accounts\";\n\nconst handleError = (error) => {\n  const errorMessage = error.response?.data?.detail || \"An error occurred\";\n  console.error(\"API Error:\", errorMessage); // Log for debugging\n  throw new Error(errorMessage);\n};\n\nexport const signup = async (data) => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/signup/`, data);\n    return saveUserData(response.data);\n  } catch (error) {\n    handleError(error);\n  }\n};\n\nexport const login = async (data) => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/login/`, data);\n    return saveUserData(response.data);\n  } catch (error) {\n    handleError(error);\n  }\n};\n\nconst saveUserData = (data) => {\n  const { access, refresh, user } = data;\n\n  // Save tokens and user data to localStorage or a secure store\n  localStorage.setItem(\"accessToken\", access);\n  localStorage.setItem(\"refreshToken\", refresh);\n  localStorage.setItem(\"userId\", user.id);\n  localStorage.setItem(\"userType\", user.user_type);\n\n  // Set the Authorization header for future API calls\n  setAuthToken(access);\n\n  return data;\n};\n\n// Helper to set Authorization header for future API calls\nexport const setAuthToken = (token) => {\n  if (token) {\n    axios.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n  } else {\n    delete axios.defaults.headers.common[\"Authorization\"];\n  }\n};\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,YAAY,GAAG,oCAAoC;AAEzD,MAAMC,WAAW,GAAIC,KAAK,IAAK;EAAA,IAAAC,eAAA,EAAAC,oBAAA;EAC7B,MAAMC,YAAY,GAAG,EAAAF,eAAA,GAAAD,KAAK,CAACI,QAAQ,cAAAH,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBI,IAAI,cAAAH,oBAAA,uBAApBA,oBAAA,CAAsBI,MAAM,KAAI,mBAAmB;EACxEC,OAAO,CAACP,KAAK,CAAC,YAAY,EAAEG,YAAY,CAAC,CAAC,CAAC;EAC3C,MAAM,IAAIK,KAAK,CAACL,YAAY,CAAC;AAC/B,CAAC;AAED,OAAO,MAAMM,MAAM,GAAG,MAAOJ,IAAI,IAAK;EACpC,IAAI;IACF,MAAMD,QAAQ,GAAG,MAAMP,KAAK,CAACa,IAAI,CAAC,GAAGZ,YAAY,UAAU,EAAEO,IAAI,CAAC;IAClE,OAAOM,YAAY,CAACP,QAAQ,CAACC,IAAI,CAAC;EACpC,CAAC,CAAC,OAAOL,KAAK,EAAE;IACdD,WAAW,CAACC,KAAK,CAAC;EACpB;AACF,CAAC;AAED,OAAO,MAAMY,KAAK,GAAG,MAAOP,IAAI,IAAK;EACnC,IAAI;IACF,MAAMD,QAAQ,GAAG,MAAMP,KAAK,CAACa,IAAI,CAAC,GAAGZ,YAAY,SAAS,EAAEO,IAAI,CAAC;IACjE,OAAOM,YAAY,CAACP,QAAQ,CAACC,IAAI,CAAC;EACpC,CAAC,CAAC,OAAOL,KAAK,EAAE;IACdD,WAAW,CAACC,KAAK,CAAC;EACpB;AACF,CAAC;AAED,MAAMW,YAAY,GAAIN,IAAI,IAAK;EAC7B,MAAM;IAAEQ,MAAM;IAAEC,OAAO;IAAEC;EAAK,CAAC,GAAGV,IAAI;;EAEtC;EACAW,YAAY,CAACC,OAAO,CAAC,aAAa,EAAEJ,MAAM,CAAC;EAC3CG,YAAY,CAACC,OAAO,CAAC,cAAc,EAAEH,OAAO,CAAC;EAC7CE,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEF,IAAI,CAACG,EAAE,CAAC;EACvCF,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEF,IAAI,CAACI,SAAS,CAAC;;EAEhD;EACAC,YAAY,CAACP,MAAM,CAAC;EAEpB,OAAOR,IAAI;AACb,CAAC;;AAED;AACA,OAAO,MAAMe,YAAY,GAAIC,KAAK,IAAK;EACrC,IAAIA,KAAK,EAAE;IACTxB,KAAK,CAACyB,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAG,UAAUH,KAAK,EAAE;EACpE,CAAC,MAAM;IACL,OAAOxB,KAAK,CAACyB,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC;EACvD;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}